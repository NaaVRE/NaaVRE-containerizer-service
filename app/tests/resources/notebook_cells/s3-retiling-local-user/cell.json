{
  "confs": [
    {
      "name": "conf_local_path_retiled",
      "assignation": "conf_local_path_retiled = os.path.join(pathlib.Path('/tmp/data').as_posix(), 'retiled')"
    },
    {
      "name": "conf_local_path_split",
      "assignation": "conf_local_path_split = os.path.join(pathlib.Path('/tmp/data').as_posix(), 'split')"
    },
    {
      "name": "conf_max_x",
      "assignation": "conf_max_x = '398892.19'"
    },
    {
      "name": "conf_max_y",
      "assignation": "conf_max_y = '726783.87'"
    },
    {
      "name": "conf_min_x",
      "assignation": "conf_min_x = '-113107.81'"
    },
    {
      "name": "conf_min_y",
      "assignation": "conf_min_y = '214783.87'"
    },
    {
      "name": "conf_n_tiles_side",
      "assignation": "conf_n_tiles_side = '512'"
    }
  ],
  "dependencies": [
    {
      "asname": null,
      "module": "laserfarm",
      "name": "Retiler"
    },
    {
      "asname": null,
      "module": "",
      "name": "os"
    },
    {
      "asname": null,
      "module": "",
      "name": "pathlib"
    }
  ],
  "inputs": [
    {
      "name": "split_laz_files",
      "type": "list"
    }
  ],
  "kernel": "ipython",
  "outputs": [
    {
      "name": "S3_done",
      "type": "str"
    }
  ],
  "params": [],
  "secrets": [],
  "title": "s3-retiling-local-test-user-2",
  "base_container_image": {
    "build": "ghcr.io/qcdis/naavre/naavre-cell-build-python:latest",
    "runtime": "ghcr.io/qcdis/naavre/naavre-cell-runtime-python:latest"
  },
  "original_source": "split_laz_files\n\ngrid_retile = {\n    'min_x': float(conf_min_x),\n    'max_x': float(conf_max_x),\n    'min_y': float(conf_min_y),\n    'max_y': float(conf_max_y),\n    'n_tiles_side': int(conf_n_tiles_side)\n}\n\nretiling_input = {\n    'setup_local_fs': {\n        'input_folder': conf_local_path_split,\n        'output_folder': conf_local_path_retiled\n    },\n    'set_grid': grid_retile,\n    'split_and_redistribute': {},\n    'validate': {},\n}\n\nfor file in split_laz_files:\n    clean_file = file.replace('\"','').replace('[','').replace(']','')\n    print(clean_file)\n    retiler = Retiler(clean_file,label=clean_file).config(retiling_input)\n    retiler_output = retiler.run()\n\nS3_done = 'True'"
}
